<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>선택형 이상형 월드컵</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .match-box {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }

        .candidate {
            cursor: pointer;
            transition: all 0.3s ease;
            width: 350px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .candidate:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .candidate img {
            width: 100%;
            height: 350px;
            object-fit: cover;
        }

        .candidate p {
            padding: 15px;
            background: white;
            margin: 0;
            font-size: 1.1em;
            font-weight: bold;
            color: #34495e;
        }

        .progress {
            background: #ecf0f1;
            height: 20px;
            border-radius: 10px;
            margin: 20px auto;
            width: 60%;
        }

        .progress-bar {
            height: 100%;
            background: #3498db;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        #result {
            display: none;
            margin-top: 50px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .selected-item {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: left;
        }

        .selected-item img {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            margin-right: 20px;
        }

        .round-number {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>5라운드 선택형 월드컵</h1>
        <div class="progress">
            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
        </div>
        <div class="match-box" id="matchBox"></div>
        <div id="result">
            <h2>당신의 선택 결과</h2>
            <div id="selectedItems"></div>
        </div>
    </div>

    <script>
const items = [
            { id: 1, name: "강아지", image: "https://via.placeholder.com/350x350/FFCCCC?text=Dog" },
            { id: 2, name: "고양이", image: "https://via.placeholder.com/350x350/CCFFCC?text=Cat" },
            { id: 3, name: "토끼", image: "https://via.placeholder.com/350x350/CCCCFF?text=Rabbit" },
            { id: 4, name: "사자", image: "https://via.placeholder.com/350x350/FFCC99?text=Lion" },
            { id: 5, name: "호랑이", image: "https://via.placeholder.com/350x350/99CCFF?text=Tiger" },
            { id: 6, name: "팬더", image: "https://via.placeholder.com/350x350/FF9999?text=Panda" },
            { id: 7, name: "기린", image: "https://via.placeholder.com/350x350/99FF99?text=Giraffe" },
            { id: 8, name: "코알라", image: "https://via.placeholder.com/350x350/9999FF?text=Koala" },
            { id: 9, name: "펭귄", image: "https://via.placeholder.com/350x350/FF9966?text=Penguin" },
            { id: 10, name: "코끼리", image: "https://via.placeholder.com/350x350/66CCFF?text=Elephant" },
            // 필요에 따라 더 많은 아이템 추가 가능
        ];

        let currentRound = 0;  // 0부터 시작
        const totalRounds = 5;
        let selectedItems = [];
        let usedItems = new Set();

        function getRandomPair() {
            const availableItems = items.filter(item => !usedItems.has(item.id));
            const shuffled = [...availableItems].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, 2);
        }

        function updateProgress(progress) {
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function showMatch() {
            const [item1, item2] = getRandomPair();
            const progress = (currentRound / totalRounds) * 100;

            usedItems.add(item1.id).add(item2.id);

            const matchHTML = `
                <div class="candidate" onclick="selectItem(${item1.id}, ${currentRound + 1})">
                    <img src="${item1.image}" alt="${item1.name}">
                    <p>${item1.name}</p>
                </div>
                <div class="vs">VS</div>
                <div class="candidate" onclick="selectItem(${item2.id}, ${currentRound + 1})">
                    <img src="${item2.image}" alt="${item2.name}">
                    <p>${item2.name}</p>
                </div>
            `;

            document.getElementById('matchBox').innerHTML = matchHTML;

            updateProgress(progress);
        }

        function selectItem(selectedId, round) {
            const selectedItem = items.find(item => item.id === selectedId);
            selectedItems.push({...selectedItem, round});
        
            if (currentRound >= totalRounds - 1) { // 마지막 라운드 선택 시
                showResult(); // 진행률 업데이트 없이 바로 결과 표시
            } else {
                currentRound++;
                usedItems.clear();
                showMatch();
            }
        }

        function showResult() {
            updateProgress(100); // 결과 화면 표시 시 진행률을 100%로 설정
            const resultHTML = selectedItems.map((item, index) => `
                <div class="selected-item">
                    <img src="${item.image}" alt="${item.name}">
                    <div>
                        <div class="round-number">${item.round}라운드 선택</div>
                        <h3>${item.name}</h3>
                    </div>
                </div>
            `).join('');
        
            document.getElementById('selectedItems').innerHTML = resultHTML;
            document.getElementById('result').style.display = 'block';
            document.getElementById('matchBox').style.display = 'none';
        }

        // 초기 시작
        showMatch();
    </script>
</body>
</html>
